<html>
    <head>
        <title>WhatSapp</title>
        <link rel="stylesheet" href="chat.css">
        <link rel="icon" href="logo-whatsapp-png-46043 (1).png">
        <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>
        <script src="chat.js"></script>
    </head>
    <body>

      <div class="div1">
        <img id="userImage" name="userImage"  src="male-gde53842cd_640.png" height="150px" width="170px">
       <div> <label class='text'>Name: </label>
        <label id="abckjkj" name="abc" type="text" name="text" placeholder=""></label><br>
      </div>
      </div><br><br>
      <center>
        <label id="note">NOTE: YOU CAN MAKE ROOMS TO CHAT AND YOU CAN MAKE MORE THAN ONE ROOM</label>
      <div class="form-control input_div_room_page">

        <label id="dbd">#Add Room:</label>
          <input id="kjkj" class="form-control" placeholder="Room Name" type="text">
      </div>
      <button id="nbgn" onclick="addRoom()" class="btn btn-success">#Add Room</button>
      <h3 id="abcdf" class="color_white">#YOU</h3>
        <div id="sender" class="output"></div><br><br>
        <h3 id="abcdf" class="color_white">#CREATEDBYOTHERUSER</h3>
        <div id="reciver" class="output"></div>
        <button id="logout" onclick="logout()" class="glyphicon glyphicon-log-out btn btn-danger">Logout</button>
        </center>
      </body>
      <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
  import {  getDatabase, ref as Ref, set, onValue,onChildAdded  } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js";
  import { getStorage, ref as REF, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-storage.js";
  import { getFirestore, doc, getDoc, setDoc, collection, addDoc} from "https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore.js";
  

 
  

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
  apiKey: "AIzaSyC8wgPUMiaAb3ZyiHU1ds1AopTReQJl7Oo",
  authDomain: "registration-91aca.firebaseapp.com",
  databaseURL: "https://registration-91aca-default-rtdb.firebaseio.com",
  projectId: "registration-91aca",
  storageBucket: "registration-91aca.appspot.com",
  messagingSenderId: "179474768603",
  appId: "1:179474768603:web:ae470a22b1e14eb06262fe"
};

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const clouddb = getFirestore();

  var username = localStorage.getItem('room_name505');
 const starCountRef = Ref(database, 'users/' + username);
onValue(starCountRef, (snapshot) =>{
  const data = snapshot.val();
 document.getElementById('abckjkj').innerHTML = data.username;
});
 
  var ref = doc(clouddb,"ImageLinks/" + username);

  const docSnap = await getDoc(ref);
  if(docSnap.exists()){
 userImage.src = docSnap.data().ImageURL;
  }
  

  var ubsd = localStorage.getItem('Room_Names');
 console.log(ubsd);
  const starCountRef1 = Ref(database, 'users/' + ubsd);
onValue(starCountRef1, (snapshot) =>{
  const data = snapshot.val();
  var emaildd = data.email;
  console.log(emaildd);
  localStorage.setItem('email',data.email);
});
</script>
</html>